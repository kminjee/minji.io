---
layout: post
title: (React) 모던 리액트 Deep Dive 5장
categories: Frontend
published: true
---

<br>

## 목차

1. [상태 관리가 필요한 이유](#상태-관리가-필요한-이유)
2. [리액트 훅으로 시작하는 상태 관리](#리액트-훅으로-시작하는-상태-관리)

<br>

## 상태 관리가 필요한 이유
상태는 어떠한 의미를 지닌 값이며 애플리케이션의 시나리오에 따라 지속적으로 변경될 수 있는 값을 말한다. (대표적으로 UI, URL, form, 서버에서 가져온 값 등이 있음)

### 1. 리액트 상태 관리의 역사
프레임워크를 지향하는 Angular와 다르게 리액트는 단순히 사용자 인터페이스를 만들기 위한 라이브러리일 뿐, 그 이상의 기능을 제공하지 않고 있다. 리액트에서 전역 상태 관리는 Context API가 있겠지만 이는 상태 관리가 아니라 상태 주입을 도와주는 역할이다.

- **Flux 패턴의 등장** <br>
  리액트 v16.3 에서 `Context API`가 등장하고 v16.8에서 `useContext`가 나왔다. 그 전까지는 리덕스가 나오기 전까지 이름을 알린 상태 관리 라이브러리가 없었다.

  기존의 웹 개발 문제점은 웹 애플리케이션의 크기가 클 수록 상태(데이터)가 많아짐에 따라 상태가 어디서 어떻게 변했는지 추적하기가 어려웠다. 이 문제를 `양방향 바인딩`으로 보았고, `단방향`으로 데이터 흐름을 변경하는 것을 제안한 것이 Flux 패턴의 시작이다.

- **Context API** <br>
  리액트 v16.3 에서 전역 상태를 하위 컴포넌트에 주입할 수 있는 Context API를 출시했다. 원하는 곳에서 Context Provider가 주입하는 상태를 사용할 수 있는 것이다. 단 context API는 상태 관리가 아닌 주입을 도와주는 기능이고 렌더링을 막아주는 기능이 존재하지 않으므로 사용에 주의가 필요하다. 

- **훅의 탄생, React Query와 SMR** <br>
  두 라이브러리 모두 외부에서 데이터를 불러오는 fetch를 관리하는 데 특화된 라이브러리로 API 호출에 대한 상태를 관리하고 있기 때문에 HTTP 요청에 특화된 상태 관리 라이브러리다. 

- **Recoil, Jotai, Zustand** <br>
  훅을 활용하여 작은 크기의 상태를 효율적으로 관리할 수 있는 라이브러리들이다. 모두 리액트 v16.8 이상을 요구한다. 

## 리액트 훅으로 시작하는 상태 관리
### 1. Recoil
- **Recoil의 특징** <br>
  - selector를 필두로 다양한 비동기 작업을 지원하는 API를 제공하므로 추가적인 미들웨어를 사용하지 않더라도 비동기 작업을 수월하게 처리 가능

- **Recoil의 기능** <br>
  - RecoilRoot : Recoil에서 생성되는 상태값을 저장하기 위한 스토어를 RecoilRoot에서 생성
  - atom : 상태를 나타내는 Recoil의 최소 상태 단위
  - useRecoilValue : atom의 값을 읽어오는 훅
  - useRecoilState : 값을 가져오고 변경할 수 있는 훅

### 2.Jotai
- **Jotai의 특징** <br>
  - 상향식(bottom-up) 접근법
  - 불필요한 리렌더링을 해결하고자 설계
  - 개발자들이 메모이제이션이나 최적화를 거치지 않아도 리렌더링이 되지 않도록 설계
  - 키가 없이도 각 값들을 관리할 수 있는 이유는 객체의 참조를 통해 값을 관리하기 때문

- **Jotai의 기능** <br>
  - atom : 최소 단위의 상태를 의미. atom 하나만으로 상태 생성 및 파생된 상태 생성 가능
  - useAtomValue : 값을 사용하는 쪽에서 언제든 최신 값의 atom을 사용해 리렌더링
  - useAtom : useState와 동일한 형태

### 3. Zustand
- **Zustand의 특징** <br>
  - 리덕스의 영감을 받음
  - 하나의 스토어를 중앙 집중혐으로 활용해 이 스토어 내부에서 상태를 관리
  - 많은 코드를 작성하지 않아도 빠르게 스토어를 만들어 사용
